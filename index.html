<script src="https://unpkg.com/html5-qrcode@2.3.8/minified/html5-qrcode.min.js"></script>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbywT6UPBFdP6BN2UOdL2OMdgxGqHtJZWJSzgJwNsqylvsdFfkcnChmnP9L3lBlf2tko2A/exec";

const html5QrCode = new Html5Qrcode("reader");

function startScanner() {
    Html5Qrcode.getCameras().then(devices => {
        if (devices && devices.length) {
            let cameraId = devices[0].id;

            html5QrCode.start(
                cameraId,
                {
                    fps: 10,
                    qrbox: 250
                },
                qrCodeMessage => {

                    document.getElementById("result").innerText = qrCodeMessage;

                    fetch(scriptURL, {
                        method: "POST",
                        body: JSON.stringify({ code: qrCodeMessage })
                    });

                    html5QrCode.stop(); // dừng sau khi quét 1 lần
                },
                errorMessage => {
                    // bỏ qua lỗi quét
                }
            );
        }
    }).catch(err => console.log(err));
}

startScanner();
</script>
