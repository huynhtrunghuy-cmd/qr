<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>QR Scanner</title>
<script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>

<h2>Scan QR</h2>
<div id="reader" style="width:300px"></div>
<p>Result: <span id="result"></span></p>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbywT6UPBFdP6BN2UOdL2OMdgxGqHtJZWJSzgJwNsqylvsdFfkcnChmnP9L3lBlf2tko2A/exec";

function onScanSuccess(decodedText) {

    document.getElementById("result").innerText = decodedText;

    fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify({ code: decodedText })
    })
    .then(response => response.text())
    .then(data => console.log(data))
    .catch(error => console.error("Error:", error));
}

let html5QrcodeScanner = new Html5QrcodeScanner(
    "reader",
    { fps: 10, qrbox: 250 },
    false
);

html5QrcodeScanner.render(onScanSuccess);
</script>

</body>
</html>