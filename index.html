<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>QR Scanner</title>
<script src="https://unpkg.com/html5-qrcode@2.3.8/minified/html5-qrcode.min.js"></script>
</head>
<body>

<h2>QR Scan Test</h2>
<div id="reader" style="width:300px"></div>
<p>Kết quả: <span id="result"></span></p>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbywT6UPBFdP6BN2UOdL2OMdgxGqHtJZWJSzgJwNsqylvsdFfkcnChmnP9L3lBlf2tko2A/exec";

function onScanSuccess(decodedText) {

    document.getElementById("result").innerText = decodedText;

    fetch(scriptURL, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ code: decodedText })
    });

}

function onScanFailure(error) {
    // bỏ qua
}

let html5QrcodeScanner = new Html5QrcodeScanner(
    "reader",
    { fps: 10, qrbox: 250 },
    false
);

html5QrcodeScanner.render(onScanSuccess, onScanFailure);
</script>

</body>
</html>
